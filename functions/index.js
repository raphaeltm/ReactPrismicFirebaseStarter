!function(e,r){for(var t in r)e[t]=r[t]}(this,function(e){function r(n){if(t[n])return t[n].exports;var u=t[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,r),u.l=!0,u.exports}var t={};return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=1)}([function(e,r){e.exports=require("prismic-javascript")},function(e,r,t){"use strict";function n(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function u(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function o(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(u,o){try{var i=r[u](o),a=i.value}catch(e){return void t(e)}if(!i.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}t(2);var i=t(3),a=n(i),c=t(4),s=n(c),f=t(5),p=function(){var e=o(regeneratorRuntime.mark(function e(){var r,t,n,o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=50,e.next=3,(0,f.getApi)();case 3:return t=e.sent,n=[],e.next=7,t.query([],{pageSize:r,page:1});case 7:o=e.sent,n=[].concat(u(n),u(o.results)),i=2;case 10:if(!(i<=o.total_pages)){e.next=18;break}return e.next=13,t.query([],{pageSize:r,page:i});case 13:a=e.sent,n=[].concat(u(n),u(a.results));case 15:i++,e.next=10;break;case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),l=function(e){var r=[];return e.map(function(e){r.push({url:(0,f.linkResolver)(e)})}),r};r.siteMap=a.https.onRequest(function(){var e=o(regeneratorRuntime.mark(function e(r,t){var n,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:n=e.sent,u=s.createSitemap({hostname:r.protocol+"://"+r.hostname,cacheTime:6e5,urls:l(n)}),u.toXML(function(e,r){if(e)return t.status(500).end();t.header("Content-Type","application/xml"),t.set("Cache-Control","public, max-age=1800, s-maxage=3600"),t.send(r)});case 5:case"end":return e.stop()}},e,void 0)}));return function(r,t){return e.apply(this,arguments)}}())},function(e,r){e.exports=require("babel-polyfill")},function(e,r){e.exports=require("firebase-functions")},function(e,r){e.exports=require("sitemap")},function(e,r,t){"use strict";function n(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(u,o){try{var i=r[u](o),a=i.value}catch(e){return void t(e)}if(!i.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}Object.defineProperty(r,"__esModule",{value:!0}),r.linkResolver=r.getApi=void 0;var u=t(0),o=function(e){return e&&e.__esModule?e:{default:e}}(u),i=t(6);r.getApi=function(){var e=n(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.default.getApi(i.apiEndpoint);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),r.linkResolver=i.linkResolver},function(e,r,t){"use strict";function n(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(u,o){try{var i=r[u](o),a=i.value}catch(e){return void t(e)}if(!i.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}Object.defineProperty(r,"__esModule",{value:!0});var u=t(0),o=r.apiEndpoint="https://raphaeltm.prismic.io/api/v2";r.getApi=function(){var e=n(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getApi(o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),r.linkResolver=function(e){return"homepage"===e.type?"/":"/"+e.type+"/"+(e.uid||"")}}]));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXguanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDJhNDE2ODA3MDEyNDhkN2VjN2MwIiwid2VicGFjazovLy9leHRlcm5hbCBcInByaXNtaWMtamF2YXNjcmlwdFwiIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJiYWJlbC1wb2x5ZmlsbFwiIiwid2VicGFjazovLy9leHRlcm5hbCBcImZpcmViYXNlLWZ1bmN0aW9uc1wiIiwid2VicGFjazovLy9leHRlcm5hbCBcInNpdGVtYXBcIiIsIndlYnBhY2s6Ly8vLi9zcmMvcHJpc21pYy5qcyIsIndlYnBhY2s6Ly8vLi8uLi9zcmMvcHJpc21pYy5qcyJdLCJuYW1lcyI6WyJlIiwiYSIsImkiLCJ0aGlzIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicmVxdWlyZSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwib2JqIiwibmV3T2JqIiwia2V5IiwiZGVmYXVsdCIsIl90b0NvbnN1bWFibGVBcnJheSIsImFyciIsIkFycmF5IiwiaXNBcnJheSIsImFycjIiLCJsZW5ndGgiLCJmcm9tIiwiX2FzeW5jVG9HZW5lcmF0b3IiLCJmbiIsImdlbiIsImFwcGx5IiwiYXJndW1lbnRzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJzdGVwIiwiYXJnIiwiaW5mbyIsInZhbHVlIiwiZXJyb3IiLCJkb25lIiwidGhlbiIsImVyciIsIl9maXJlYmFzZUZ1bmN0aW9ucyIsImZ1bmN0aW9ucyIsIl9zaXRlbWFwIiwic20iLCJfcHJpc21pYyIsImZldGNoQWxsUGFnZXMiLCJfcmVmIiwicmVnZW5lcmF0b3JSdW50aW1lIiwibWFyayIsIl9jYWxsZWUiLCJwYWdlU2l6ZSIsImFwaSIsImFsbFJlc3VsdHMiLCJpbml0aWFsIiwiY3VycmVudFBhZ2UiLCJyZXNwb25zZSIsIndyYXAiLCJfY29udGV4dCIsInByZXYiLCJuZXh0IiwiZ2V0QXBpIiwic2VudCIsInF1ZXJ5IiwicGFnZSIsInJlc3VsdHMiLCJ0b3RhbF9wYWdlcyIsImFicnVwdCIsInN0b3AiLCJ1bmRlZmluZWQiLCJnZXRVUkxzRnJvbVBhZ2VzIiwicGFnZXMiLCJ1cmxzIiwibWFwIiwiZG9jdW1lbnQiLCJwdXNoIiwidXJsIiwibGlua1Jlc29sdmVyIiwic2l0ZU1hcCIsImh0dHBzIiwib25SZXF1ZXN0IiwiX3JlZjIiLCJfY2FsbGVlMiIsInJlcSIsInJlcyIsInNpdGVtYXAiLCJfY29udGV4dDIiLCJjcmVhdGVTaXRlbWFwIiwiaG9zdG5hbWUiLCJwcm90b2NvbCIsImNhY2hlVGltZSIsInRvWE1MIiwieG1sIiwic3RhdHVzIiwiZW5kIiwiaGVhZGVyIiwic2V0Iiwic2VuZCIsIl94IiwiX3gyIiwiX3ByaXNtaWNKYXZhc2NyaXB0IiwiX3ByaXNtaWNKYXZhc2NyaXB0MiIsImFwaUVuZHBvaW50IiwiUHJpc21pYyIsImRvYyIsInR5cGUiLCJ1aWQiXSwibWFwcGluZ3MiOiJDQUFDLFNBQVNBLEVBQUdDLEdBQUssSUFBSSxHQUFJQyxLQUFLRCxHQUFHRCxFQUFFRSxHQUFLRCxFQUFFQyxJQUFNQyxLQUFlLFNBQVVDLEdDSTFFLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FKLEVBQUFJLEVBQ0FJLEdBQUEsRUFDQUYsV0FVQSxPQU5BSixHQUFBRSxHQUFBSyxL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KSB7IGZvcih2YXIgaSBpbiBhKSBlW2ldID0gYVtpXTsgfSh0aGlzLCAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4vKioqKioqLyBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG4vKioqKioqLyBcdFx0XHR9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInByaXNtaWMtamF2YXNjcmlwdFwiKTtcblxuLyoqKi8gfSksXG4vKiAxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbl9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfZmlyZWJhc2VGdW5jdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG52YXIgZnVuY3Rpb25zID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX2ZpcmViYXNlRnVuY3Rpb25zKTtcblxudmFyIF9zaXRlbWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxudmFyIHNtID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX3NpdGVtYXApO1xuXG52YXIgX3ByaXNtaWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfVxuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxuZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IGZ1bmN0aW9uIHN0ZXAoa2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsgc3RlcChcIm5leHRcIiwgdmFsdWUpOyB9LCBmdW5jdGlvbiAoZXJyKSB7IHN0ZXAoXCJ0aHJvd1wiLCBlcnIpOyB9KTsgfSB9IHJldHVybiBzdGVwKFwibmV4dFwiKTsgfSk7IH07IH1cblxuLy8gLy8gQ3JlYXRlIGFuZCBEZXBsb3kgWW91ciBGaXJzdCBDbG91ZCBGdW5jdGlvbnNcbi8vIC8vIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2Z1bmN0aW9ucy93cml0ZS1maXJlYmFzZS1mdW5jdGlvbnNcbi8vXG4vLyBleHBvcnRzLmhlbGxvV29ybGQgPSBmdW5jdGlvbnMuaHR0cHMub25SZXF1ZXN0KChyZXF1ZXN0LCByZXNwb25zZSkgPT4ge1xuLy8gIHJlc3BvbnNlLnNlbmQoXCJIZWxsbyBmcm9tIEZpcmViYXNlIVwiKTtcbi8vIH0pO1xuXG52YXIgZmV0Y2hBbGxQYWdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7XG4gICAgdmFyIHBhZ2VTaXplLCBhcGksIGFsbFJlc3VsdHMsIGluaXRpYWwsIGN1cnJlbnRQYWdlLCByZXNwb25zZTtcbiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHtcbiAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBwYWdlU2l6ZSA9IDUwO1xuICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7XG4gICAgICAgICAgICByZXR1cm4gKDAsIF9wcmlzbWljLmdldEFwaSkoKTtcblxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIGFwaSA9IF9jb250ZXh0LnNlbnQ7XG4gICAgICAgICAgICBhbGxSZXN1bHRzID0gW107XG4gICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNztcbiAgICAgICAgICAgIHJldHVybiBhcGkucXVlcnkoW10sIHsgcGFnZVNpemU6IHBhZ2VTaXplLCBwYWdlOiAxIH0pO1xuXG4gICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgaW5pdGlhbCA9IF9jb250ZXh0LnNlbnQ7XG5cbiAgICAgICAgICAgIGFsbFJlc3VsdHMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGFsbFJlc3VsdHMpLCBfdG9Db25zdW1hYmxlQXJyYXkoaW5pdGlhbC5yZXN1bHRzKSk7XG4gICAgICAgICAgICBjdXJyZW50UGFnZSA9IDI7XG5cbiAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgaWYgKCEoY3VycmVudFBhZ2UgPD0gaW5pdGlhbC50b3RhbF9wYWdlcykpIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE4O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzO1xuICAgICAgICAgICAgcmV0dXJuIGFwaS5xdWVyeShbXSwgeyBwYWdlU2l6ZTogcGFnZVNpemUsIHBhZ2U6IGN1cnJlbnRQYWdlIH0pO1xuXG4gICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDtcblxuICAgICAgICAgICAgYWxsUmVzdWx0cyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoYWxsUmVzdWx0cyksIF90b0NvbnN1bWFibGVBcnJheShyZXNwb25zZS5yZXN1bHRzKSk7XG5cbiAgICAgICAgICBjYXNlIDE1OlxuICAgICAgICAgICAgY3VycmVudFBhZ2UrKztcbiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAxODpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgYWxsUmVzdWx0cyk7XG5cbiAgICAgICAgICBjYXNlIDE5OlxuICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCBfY2FsbGVlLCB1bmRlZmluZWQpO1xuICB9KSk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGZldGNoQWxsUGFnZXMoKSB7XG4gICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn0oKTtcblxudmFyIGdldFVSTHNGcm9tUGFnZXMgPSBmdW5jdGlvbiBnZXRVUkxzRnJvbVBhZ2VzKHBhZ2VzKSB7XG4gIHZhciB1cmxzID0gW107XG4gIHBhZ2VzLm1hcChmdW5jdGlvbiAoZG9jdW1lbnQpIHtcbiAgICB1cmxzLnB1c2goe1xuICAgICAgdXJsOiAoMCwgX3ByaXNtaWMubGlua1Jlc29sdmVyKShkb2N1bWVudClcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiB1cmxzO1xufTtcblxuZXhwb3J0cy5zaXRlTWFwID0gZnVuY3Rpb25zLmh0dHBzLm9uUmVxdWVzdChmdW5jdGlvbiAoKSB7XG4gIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIocmVxLCByZXMpIHtcbiAgICB2YXIgcGFnZXMsIHNpdGVtYXA7XG4gICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHtcbiAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjtcbiAgICAgICAgICAgIHJldHVybiBmZXRjaEFsbFBhZ2VzKCk7XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBwYWdlcyA9IF9jb250ZXh0Mi5zZW50O1xuICAgICAgICAgICAgc2l0ZW1hcCA9IHNtLmNyZWF0ZVNpdGVtYXAoe1xuICAgICAgICAgICAgICBob3N0bmFtZTogcmVxLnByb3RvY29sICsgXCI6Ly9cIiArIHJlcS5ob3N0bmFtZSxcbiAgICAgICAgICAgICAgY2FjaGVUaW1lOiA2MDAwMDAsXG4gICAgICAgICAgICAgIHVybHM6IGdldFVSTHNGcm9tUGFnZXMocGFnZXMpXG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICBzaXRlbWFwLnRvWE1MKGZ1bmN0aW9uIChlcnIsIHhtbCkge1xuICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5lbmQoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXMuaGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24veG1sJyk7XG4gICAgICAgICAgICAgIHJlcy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCAncHVibGljLCBtYXgtYWdlPTE4MDAsIHMtbWF4YWdlPTM2MDAnKTtcbiAgICAgICAgICAgICAgcmVzLnNlbmQoeG1sKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgX2NhbGxlZTIsIHVuZGVmaW5lZCk7XG4gIH0pKTtcblxuICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIpIHtcbiAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn0oKSk7XG5cbi8qKiovIH0pLFxuLyogMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJiYWJlbC1wb2x5ZmlsbFwiKTtcblxuLyoqKi8gfSksXG4vKiAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImZpcmViYXNlLWZ1bmN0aW9uc1wiKTtcblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInNpdGVtYXBcIik7XG5cbi8qKiovIH0pLFxuLyogNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5saW5rUmVzb2x2ZXIgPSBleHBvcnRzLmdldEFwaSA9IHVuZGVmaW5lZDtcblxudmFyIF9wcmlzbWljSmF2YXNjcmlwdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfcHJpc21pY0phdmFzY3JpcHQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJpc21pY0phdmFzY3JpcHQpO1xuXG52YXIgX3ByaXNtaWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyB2YXIgZ2VuID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgZnVuY3Rpb24gc3RlcChrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgeyBzdGVwKFwibmV4dFwiLCB2YWx1ZSk7IH0sIGZ1bmN0aW9uIChlcnIpIHsgc3RlcChcInRocm93XCIsIGVycik7IH0pOyB9IH0gcmV0dXJuIHN0ZXAoXCJuZXh0XCIpOyB9KTsgfTsgfVxuXG52YXIgZ2V0QXBpID0gZXhwb3J0cy5nZXRBcGkgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkge1xuICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkge1xuICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyO1xuICAgICAgICAgICAgcmV0dXJuIF9wcmlzbWljSmF2YXNjcmlwdDIuZGVmYXVsdC5nZXRBcGkoX3ByaXNtaWMuYXBpRW5kcG9pbnQpO1xuXG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdChcInJldHVyblwiLCBfY29udGV4dC5zZW50KTtcblxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgX2NhbGxlZSwgdW5kZWZpbmVkKTtcbiAgfSkpO1xuXG4gIHJldHVybiBmdW5jdGlvbiBnZXRBcGkoKSB7XG4gICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn0oKTtcblxudmFyIGxpbmtSZXNvbHZlciA9IGV4cG9ydHMubGlua1Jlc29sdmVyID0gX3ByaXNtaWMubGlua1Jlc29sdmVyO1xuXG4vKioqLyB9KSxcbi8qIDYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxuZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IGZ1bmN0aW9uIHN0ZXAoa2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsgc3RlcChcIm5leHRcIiwgdmFsdWUpOyB9LCBmdW5jdGlvbiAoZXJyKSB7IHN0ZXAoXCJ0aHJvd1wiLCBlcnIpOyB9KTsgfSB9IHJldHVybiBzdGVwKFwibmV4dFwiKTsgfSk7IH07IH1cblxudmFyIFByaXNtaWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgYXBpRW5kcG9pbnQgPSBleHBvcnRzLmFwaUVuZHBvaW50ID0gXCJodHRwczovL3JhcGhhZWx0bS5wcmlzbWljLmlvL2FwaS92MlwiO1xuXG52YXIgZ2V0QXBpID0gZXhwb3J0cy5nZXRBcGkgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkge1xuICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkge1xuICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyO1xuICAgICAgICAgICAgcmV0dXJuIFByaXNtaWMuZ2V0QXBpKGFwaUVuZHBvaW50KTtcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgX2NvbnRleHQuc2VudCk7XG5cbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIF9jYWxsZWUsIHVuZGVmaW5lZCk7XG4gIH0pKTtcblxuICByZXR1cm4gZnVuY3Rpb24gZ2V0QXBpKCkge1xuICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG59KCk7XG5cbnZhciBsaW5rUmVzb2x2ZXIgPSBleHBvcnRzLmxpbmtSZXNvbHZlciA9IGZ1bmN0aW9uIGxpbmtSZXNvbHZlcihkb2MpIHtcbiAgaWYgKGRvYy50eXBlID09PSBcImhvbWVwYWdlXCIpIHtcbiAgICByZXR1cm4gJy8nO1xuICB9XG4gIHJldHVybiBcIi9cIiArIGRvYy50eXBlICsgXCIvXCIgKyAoZG9jLnVpZCB8fCAnJyk7XG59O1xuXG4vKioqLyB9KVxuLyoqKioqKi8gXSkpKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gaW5kZXguanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCAyYTQxNjgwNzAxMjQ4ZDdlYzdjMCIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInByaXNtaWMtamF2YXNjcmlwdFwiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcInByaXNtaWMtamF2YXNjcmlwdFwiXG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBcImJhYmVsLXBvbHlmaWxsXCI7XG5pbXBvcnQgKiBhcyBmdW5jdGlvbnMgZnJvbSBcImZpcmViYXNlLWZ1bmN0aW9uc1wiO1xuaW1wb3J0ICogYXMgc20gZnJvbSBcInNpdGVtYXBcIjtcbmltcG9ydCB7Z2V0QXBpLCBsaW5rUmVzb2x2ZXJ9IGZyb20gXCIuL3ByaXNtaWNcIjtcblxuLy8gLy8gQ3JlYXRlIGFuZCBEZXBsb3kgWW91ciBGaXJzdCBDbG91ZCBGdW5jdGlvbnNcbi8vIC8vIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2Z1bmN0aW9ucy93cml0ZS1maXJlYmFzZS1mdW5jdGlvbnNcbi8vXG4vLyBleHBvcnRzLmhlbGxvV29ybGQgPSBmdW5jdGlvbnMuaHR0cHMub25SZXF1ZXN0KChyZXF1ZXN0LCByZXNwb25zZSkgPT4ge1xuLy8gIHJlc3BvbnNlLnNlbmQoXCJIZWxsbyBmcm9tIEZpcmViYXNlIVwiKTtcbi8vIH0pO1xuXG5jb25zdCBmZXRjaEFsbFBhZ2VzID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCBwYWdlU2l6ZSA9IDUwO1xuICBjb25zdCBhcGkgPSBhd2FpdCBnZXRBcGkoKTtcbiAgbGV0IGFsbFJlc3VsdHMgPSBbXTtcbiAgY29uc3QgaW5pdGlhbCA9IGF3YWl0IGFwaS5xdWVyeShbXSwge3BhZ2VTaXplOiBwYWdlU2l6ZSwgcGFnZTogMX0pO1xuICBhbGxSZXN1bHRzID0gWy4uLmFsbFJlc3VsdHMsIC4uLmluaXRpYWwucmVzdWx0c107XG4gIGZvciAobGV0IGN1cnJlbnRQYWdlID0gMjsgY3VycmVudFBhZ2UgPD0gaW5pdGlhbC50b3RhbF9wYWdlczsgY3VycmVudFBhZ2UrKykge1xuICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGFwaS5xdWVyeShbXSwge3BhZ2VTaXplOiBwYWdlU2l6ZSwgcGFnZTogY3VycmVudFBhZ2V9KTtcbiAgICBhbGxSZXN1bHRzID0gWy4uLmFsbFJlc3VsdHMsIC4uLnJlc3BvbnNlLnJlc3VsdHNdO1xuICB9XG4gIHJldHVybiBhbGxSZXN1bHRzO1xufTtcblxuY29uc3QgZ2V0VVJMc0Zyb21QYWdlcyA9IChwYWdlcykgPT4ge1xuICBsZXQgdXJscyA9IFtdO1xuICBwYWdlcy5tYXAoKGRvY3VtZW50KSA9PiB7XG4gICAgdXJscy5wdXNoKHtcbiAgICAgIHVybDogbGlua1Jlc29sdmVyKGRvY3VtZW50KVxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIHVybHM7XG59O1xuXG5leHBvcnRzLnNpdGVNYXAgPSBmdW5jdGlvbnMuaHR0cHMub25SZXF1ZXN0KGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCBwYWdlcyA9IGF3YWl0IGZldGNoQWxsUGFnZXMoKTtcblxuICBjb25zdCBzaXRlbWFwID0gc20uY3JlYXRlU2l0ZW1hcCh7XG4gICAgaG9zdG5hbWU6IGAke3JlcS5wcm90b2NvbH06Ly8ke3JlcS5ob3N0bmFtZX1gLFxuICAgIGNhY2hlVGltZTogNjAwMDAwLFxuICAgIHVybHM6IGdldFVSTHNGcm9tUGFnZXMocGFnZXMpXG4gIH0pO1xuXG4gIHNpdGVtYXAudG9YTUwoZnVuY3Rpb24gKGVyciwgeG1sKSB7XG4gICAgaWYgKGVycikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5lbmQoKTtcbiAgICB9XG4gICAgcmVzLmhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL3htbCcpO1xuICAgIHJlcy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCAncHVibGljLCBtYXgtYWdlPTE4MDAsIHMtbWF4YWdlPTM2MDAnKTtcbiAgICByZXMuc2VuZCh4bWwpO1xuICB9KTtcbn0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9pbmRleC5qcyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImJhYmVsLXBvbHlmaWxsXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiYmFiZWwtcG9seWZpbGxcIlxuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJmaXJlYmFzZS1mdW5jdGlvbnNcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJmaXJlYmFzZS1mdW5jdGlvbnNcIlxuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJzaXRlbWFwXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwic2l0ZW1hcFwiXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBQcmlzbWljIGZyb20gXCJwcmlzbWljLWphdmFzY3JpcHRcIjtcclxuaW1wb3J0IHthcGlFbmRwb2ludCwgbGlua1Jlc29sdmVyIGFzIGxyfSBmcm9tIFwiLi4vLi4vc3JjL3ByaXNtaWNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRBcGkgPSBhc3luYyAoKSA9PiB7XHJcbiAgcmV0dXJuIGF3YWl0IFByaXNtaWMuZ2V0QXBpKGFwaUVuZHBvaW50KTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBsaW5rUmVzb2x2ZXIgPSBscjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvcHJpc21pYy5qcyIsImNvbnN0IFByaXNtaWMgPSByZXF1aXJlKCdwcmlzbWljLWphdmFzY3JpcHQnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBhcGlFbmRwb2ludCA9IFwiaHR0cHM6Ly9yYXBoYWVsdG0ucHJpc21pYy5pby9hcGkvdjJcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRBcGkgPSBhc3luYyAoKSA9PiB7XHJcbiAgcmV0dXJuIGF3YWl0IFByaXNtaWMuZ2V0QXBpKGFwaUVuZHBvaW50KTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBsaW5rUmVzb2x2ZXIgPSAoZG9jKSA9PiB7XHJcbiAgaWYoZG9jLnR5cGUgPT09IFwiaG9tZXBhZ2VcIil7XHJcbiAgICByZXR1cm4gJy8nO1xyXG4gIH1cclxuICByZXR1cm4gYC8ke2RvYy50eXBlfS9gICsgKGRvYy51aWQgfHwgJycpO1xyXG59O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL3NyYy9wcmlzbWljLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==