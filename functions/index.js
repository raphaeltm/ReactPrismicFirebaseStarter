!function(e,r){for(var t in r)e[t]=r[t]}(this,function(e){function r(n){if(t[n])return t[n].exports;var u=t[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,r),u.l=!0,u.exports}var t={};return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=1)}([function(e,r){e.exports=require("prismic-javascript")},function(e,r,t){"use strict";function n(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function u(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function i(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(u,i){try{var o=r[u](i),a=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}t(2);var o=t(3),a=n(o),c=t(4),s=n(c),f=t(5),p=function(){var e=i(regeneratorRuntime.mark(function e(){var r,t,n,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=50,e.next=3,(0,f.getApi)();case 3:return t=e.sent,n=[],e.next=7,t.query([],{pageSize:r,page:1});case 7:i=e.sent,n=[].concat(u(n),u(i.results)),o=2;case 10:if(!(o<=i.total_pages)){e.next=18;break}return e.next=13,t.query([],{pageSize:r,page:o});case 13:a=e.sent,n=[].concat(u(n),u(a.results));case 15:o++,e.next=10;break;case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),l=function(e){var r=[];return e.map(function(e){r.push({url:(0,f.linkResolver)(e)})}),r};r.siteMap=a.https.onRequest(function(){var e=i(regeneratorRuntime.mark(function e(r,t){var n,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:n=e.sent,u=s.createSitemap({hostname:r.protocol+"://"+r.hostname,cacheTime:6e5,urls:l(n)}),u.toXML(function(e,r){if(e)return t.status(500).end();t.header("Content-Type","application/xml"),t.send(r)});case 5:case"end":return e.stop()}},e,void 0)}));return function(r,t){return e.apply(this,arguments)}}())},function(e,r){e.exports=require("babel-polyfill")},function(e,r){e.exports=require("firebase-functions")},function(e,r){e.exports=require("sitemap")},function(e,r,t){"use strict";function n(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(u,i){try{var o=r[u](i),a=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}Object.defineProperty(r,"__esModule",{value:!0}),r.linkResolver=r.getApi=void 0;var u=t(0),i=function(e){return e&&e.__esModule?e:{default:e}}(u),o=t(6);r.getApi=function(){var e=n(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.getApi(o.apiEndpoint);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),r.linkResolver=o.linkResolver},function(e,r,t){"use strict";function n(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(u,i){try{var o=r[u](i),a=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}Object.defineProperty(r,"__esModule",{value:!0});var u=t(0),i=r.apiEndpoint="https://raphaeltm.prismic.io/api/v2";r.getApi=function(){var e=n(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getApi(i);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),r.linkResolver=function(e){return"homepage"===e.type?"/":"/"+e.type+"/"+(e.uid||"")}}]));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXguanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGYwZTQ5OTM0MTE0NDNhZDQ3NDQ2Iiwid2VicGFjazovLy9leHRlcm5hbCBcInByaXNtaWMtamF2YXNjcmlwdFwiIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJiYWJlbC1wb2x5ZmlsbFwiIiwid2VicGFjazovLy9leHRlcm5hbCBcImZpcmViYXNlLWZ1bmN0aW9uc1wiIiwid2VicGFjazovLy9leHRlcm5hbCBcInNpdGVtYXBcIiIsIndlYnBhY2s6Ly8vLi9zcmMvcHJpc21pYy5qcyIsIndlYnBhY2s6Ly8vLi8uLi9zcmMvcHJpc21pYy5qcyJdLCJuYW1lcyI6WyJlIiwiYSIsImkiLCJ0aGlzIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicmVxdWlyZSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwib2JqIiwibmV3T2JqIiwia2V5IiwiZGVmYXVsdCIsIl90b0NvbnN1bWFibGVBcnJheSIsImFyciIsIkFycmF5IiwiaXNBcnJheSIsImFycjIiLCJsZW5ndGgiLCJmcm9tIiwiX2FzeW5jVG9HZW5lcmF0b3IiLCJmbiIsImdlbiIsImFwcGx5IiwiYXJndW1lbnRzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJzdGVwIiwiYXJnIiwiaW5mbyIsInZhbHVlIiwiZXJyb3IiLCJkb25lIiwidGhlbiIsImVyciIsIl9maXJlYmFzZUZ1bmN0aW9ucyIsImZ1bmN0aW9ucyIsIl9zaXRlbWFwIiwic20iLCJfcHJpc21pYyIsImZldGNoQWxsUGFnZXMiLCJfcmVmIiwicmVnZW5lcmF0b3JSdW50aW1lIiwibWFyayIsIl9jYWxsZWUiLCJwYWdlU2l6ZSIsImFwaSIsImFsbFJlc3VsdHMiLCJpbml0aWFsIiwiY3VycmVudFBhZ2UiLCJyZXNwb25zZSIsIndyYXAiLCJfY29udGV4dCIsInByZXYiLCJuZXh0IiwiZ2V0QXBpIiwic2VudCIsInF1ZXJ5IiwicGFnZSIsInJlc3VsdHMiLCJ0b3RhbF9wYWdlcyIsImFicnVwdCIsInN0b3AiLCJ1bmRlZmluZWQiLCJnZXRVUkxzRnJvbVBhZ2VzIiwicGFnZXMiLCJ1cmxzIiwibWFwIiwiZG9jdW1lbnQiLCJwdXNoIiwidXJsIiwibGlua1Jlc29sdmVyIiwic2l0ZU1hcCIsImh0dHBzIiwib25SZXF1ZXN0IiwiX3JlZjIiLCJfY2FsbGVlMiIsInJlcSIsInJlcyIsInNpdGVtYXAiLCJfY29udGV4dDIiLCJjcmVhdGVTaXRlbWFwIiwiaG9zdG5hbWUiLCJwcm90b2NvbCIsImNhY2hlVGltZSIsInRvWE1MIiwieG1sIiwic3RhdHVzIiwiZW5kIiwiaGVhZGVyIiwic2VuZCIsIl94IiwiX3gyIiwiX3ByaXNtaWNKYXZhc2NyaXB0IiwiX3ByaXNtaWNKYXZhc2NyaXB0MiIsImFwaUVuZHBvaW50IiwiUHJpc21pYyIsImRvYyIsInR5cGUiLCJ1aWQiXSwibWFwcGluZ3MiOiJDQUFDLFNBQVNBLEVBQUdDLEdBQUssSUFBSSxHQUFJQyxLQUFLRCxHQUFHRCxFQUFFRSxHQUFLRCxFQUFFQyxJQUFNQyxLQUFlLFNBQVVDLEdDSTFFLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FKLEVBQUFJLEVBQ0FJLEdBQUEsRUFDQUYsV0FVQSxPQU5BSixHQUFBRSxHQUFBSyxLQUFBRixF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QUFuQixNQUFBNUMsS0FBQTZDLGVBSUFnRCwrQlBpUlAsU0FBVXZGLEVBQVFELEVBQVNILEdBRWpDLFlBT0EsU0FBU3VDLEdBQWtCQyxHQUFNLE1BQU8sWUFBYyxHQUFJQyxHQUFNRCxFQUFHRSxNQUFNNUMsS0FBTTZDLFVBQVksT0FBTyxJQUFJQyxTQUFRLFNBQVVDLEVBQVNDLEdBQVUsUUFBU0MsR0FBS2pCLEVBQUtrQixHQUFPLElBQU0sR0FBSUMsR0FBT1IsRUFBSVgsR0FBS2tCLEdBQVVFLEVBQVFELEVBQUtDLE1BQVMsTUFBT0MsR0FBd0IsV0FBZkwsR0FBT0ssR0FBa0IsSUFBSUYsRUFBS0csS0FBaUMsTUFBT1IsU0FBUUMsUUFBUUssR0FBT0csS0FBSyxTQUFVSCxHQUFTSCxFQUFLLE9BQVFHLElBQVcsU0FBVUksR0FBT1AsRUFBSyxRQUFTTyxJQUF0SVQsR0FBUUssR0FBNEksTUFBT0gsR0FBSyxXQUp6YmxDLE9BQU9DLGVBQWVYLEVBQVMsY0FDN0IrQyxPQUFPLEdROVJULElBQU1rRSxHQUFVcEgsRUFBUSxHQUVYbUgsZ0JBQWMscUNBRWR4QyxxQkFBQSxHQUFBZCxHQUFBdEIsRUFBQXVCLG1CQUFBQyxLQUFTLFFBQUFDLEtBQUEsTUFBQUYsb0JBQUFTLEtBQUEsU0FBQUMsR0FBQSxjQUFBQSxFQUFBQyxLQUFBRCxFQUFBRSxNQUFBLGFBQUFGLEdBQUFFLEtBQUEsRUFDUDBDLEVBQVF6QyxPQUFPd0MsRUFEUixjQUFBM0MsR0FBQVMsT0FBQSxTQUFBVCxFQUFBSSxLQUFBLHdCQUFBSixHQUFBVSxTQUFBbEIsTUFBQW1CLE1BQVQseUJBQUF0QixHQUFBbkIsTUFBQTVDLEtBQUE2QyxlQUlBZ0QsZUFBZSxTQUFDMEIsR0FDM0IsTUFBZ0IsYUFBYkEsRUFBSUMsS0FDRSxJQUVGLElBQUlELEVBQUlDLEtBQVIsS0FBbUJELEVBQUlFLEtBQU8iLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oZSwgYSkgeyBmb3IodmFyIGkgaW4gYSkgZVtpXSA9IGFbaV07IH0odGhpcywgLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRpOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGw6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge31cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbi8qKioqKiovIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuLyoqKioqKi8gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuLyoqKioqKi8gXHRcdFx0XHRnZXQ6IGdldHRlclxuLyoqKioqKi8gXHRcdFx0fSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4vKioqKioqLyBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4vKioqKioqLyBcdFx0cmV0dXJuIGdldHRlcjtcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJwcmlzbWljLWphdmFzY3JpcHRcIik7XG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX2ZpcmViYXNlRnVuY3Rpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxudmFyIGZ1bmN0aW9ucyA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9maXJlYmFzZUZ1bmN0aW9ucyk7XG5cbnZhciBfc2l0ZW1hcCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cbnZhciBzbSA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9zaXRlbWFwKTtcblxudmFyIF9wcmlzbWljID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cbmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBnZW4gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyBmdW5jdGlvbiBzdGVwKGtleSwgYXJnKSB7IHRyeSB7IHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsgfSBjYXRjaCAoZXJyb3IpIHsgcmVqZWN0KGVycm9yKTsgcmV0dXJuOyB9IGlmIChpbmZvLmRvbmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0gZWxzZSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7IHN0ZXAoXCJuZXh0XCIsIHZhbHVlKTsgfSwgZnVuY3Rpb24gKGVycikgeyBzdGVwKFwidGhyb3dcIiwgZXJyKTsgfSk7IH0gfSByZXR1cm4gc3RlcChcIm5leHRcIik7IH0pOyB9OyB9XG5cbi8vIC8vIENyZWF0ZSBhbmQgRGVwbG95IFlvdXIgRmlyc3QgQ2xvdWQgRnVuY3Rpb25zXG4vLyAvLyBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9mdW5jdGlvbnMvd3JpdGUtZmlyZWJhc2UtZnVuY3Rpb25zXG4vL1xuLy8gZXhwb3J0cy5oZWxsb1dvcmxkID0gZnVuY3Rpb25zLmh0dHBzLm9uUmVxdWVzdCgocmVxdWVzdCwgcmVzcG9uc2UpID0+IHtcbi8vICByZXNwb25zZS5zZW5kKFwiSGVsbG8gZnJvbSBGaXJlYmFzZSFcIik7XG4vLyB9KTtcblxudmFyIGZldGNoQWxsUGFnZXMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkge1xuICAgIHZhciBwYWdlU2l6ZSwgYXBpLCBhbGxSZXN1bHRzLCBpbml0aWFsLCBjdXJyZW50UGFnZSwgcmVzcG9uc2U7XG4gICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG4gICAgICB3aGlsZSAoMSkge1xuICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcGFnZVNpemUgPSA1MDtcbiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzO1xuICAgICAgICAgICAgcmV0dXJuICgwLCBfcHJpc21pYy5nZXRBcGkpKCk7XG5cbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBhcGkgPSBfY29udGV4dC5zZW50O1xuICAgICAgICAgICAgYWxsUmVzdWx0cyA9IFtdO1xuICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7XG4gICAgICAgICAgICByZXR1cm4gYXBpLnF1ZXJ5KFtdLCB7IHBhZ2VTaXplOiBwYWdlU2l6ZSwgcGFnZTogMSB9KTtcblxuICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgIGluaXRpYWwgPSBfY29udGV4dC5zZW50O1xuXG4gICAgICAgICAgICBhbGxSZXN1bHRzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShhbGxSZXN1bHRzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGluaXRpYWwucmVzdWx0cykpO1xuICAgICAgICAgICAgY3VycmVudFBhZ2UgPSAyO1xuXG4gICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgIGlmICghKGN1cnJlbnRQYWdlIDw9IGluaXRpYWwudG90YWxfcGFnZXMpKSB7XG4gICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxODtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMztcbiAgICAgICAgICAgIHJldHVybiBhcGkucXVlcnkoW10sIHsgcGFnZVNpemU6IHBhZ2VTaXplLCBwYWdlOiBjdXJyZW50UGFnZSB9KTtcblxuICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7XG5cbiAgICAgICAgICAgIGFsbFJlc3VsdHMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGFsbFJlc3VsdHMpLCBfdG9Db25zdW1hYmxlQXJyYXkocmVzcG9uc2UucmVzdWx0cykpO1xuXG4gICAgICAgICAgY2FzZSAxNTpcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlKys7XG4gICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMTg6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIGFsbFJlc3VsdHMpO1xuXG4gICAgICAgICAgY2FzZSAxOTpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgX2NhbGxlZSwgdW5kZWZpbmVkKTtcbiAgfSkpO1xuXG4gIHJldHVybiBmdW5jdGlvbiBmZXRjaEFsbFBhZ2VzKCkge1xuICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG59KCk7XG5cbnZhciBnZXRVUkxzRnJvbVBhZ2VzID0gZnVuY3Rpb24gZ2V0VVJMc0Zyb21QYWdlcyhwYWdlcykge1xuICB2YXIgdXJscyA9IFtdO1xuICBwYWdlcy5tYXAoZnVuY3Rpb24gKGRvY3VtZW50KSB7XG4gICAgdXJscy5wdXNoKHtcbiAgICAgIHVybDogKDAsIF9wcmlzbWljLmxpbmtSZXNvbHZlcikoZG9jdW1lbnQpXG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gdXJscztcbn07XG5cbmV4cG9ydHMuc2l0ZU1hcCA9IGZ1bmN0aW9ucy5odHRwcy5vblJlcXVlc3QoZnVuY3Rpb24gKCkge1xuICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHJlcSwgcmVzKSB7XG4gICAgdmFyIHBhZ2VzLCBzaXRlbWFwO1xuICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7XG4gICAgICB3aGlsZSAoMSkge1xuICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7XG4gICAgICAgICAgICByZXR1cm4gZmV0Y2hBbGxQYWdlcygpO1xuXG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcGFnZXMgPSBfY29udGV4dDIuc2VudDtcbiAgICAgICAgICAgIHNpdGVtYXAgPSBzbS5jcmVhdGVTaXRlbWFwKHtcbiAgICAgICAgICAgICAgaG9zdG5hbWU6IHJlcS5wcm90b2NvbCArIFwiOi8vXCIgKyByZXEuaG9zdG5hbWUsXG4gICAgICAgICAgICAgIGNhY2hlVGltZTogNjAwMDAwLFxuICAgICAgICAgICAgICB1cmxzOiBnZXRVUkxzRnJvbVBhZ2VzKHBhZ2VzKVxuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgc2l0ZW1hcC50b1hNTChmdW5jdGlvbiAoZXJyLCB4bWwpIHtcbiAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuZW5kKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmVzLmhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL3htbCcpO1xuICAgICAgICAgICAgICByZXMuc2VuZCh4bWwpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCBfY2FsbGVlMiwgdW5kZWZpbmVkKTtcbiAgfSkpO1xuXG4gIHJldHVybiBmdW5jdGlvbiAoX3gsIF94Mikge1xuICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xufSgpKTtcblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImJhYmVsLXBvbHlmaWxsXCIpO1xuXG4vKioqLyB9KSxcbi8qIDMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZmlyZWJhc2UtZnVuY3Rpb25zXCIpO1xuXG4vKioqLyB9KSxcbi8qIDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwic2l0ZW1hcFwiKTtcblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmxpbmtSZXNvbHZlciA9IGV4cG9ydHMuZ2V0QXBpID0gdW5kZWZpbmVkO1xuXG52YXIgX3ByaXNtaWNKYXZhc2NyaXB0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9wcmlzbWljSmF2YXNjcmlwdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcmlzbWljSmF2YXNjcmlwdCk7XG5cbnZhciBfcHJpc21pYyA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBnZW4gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyBmdW5jdGlvbiBzdGVwKGtleSwgYXJnKSB7IHRyeSB7IHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsgfSBjYXRjaCAoZXJyb3IpIHsgcmVqZWN0KGVycm9yKTsgcmV0dXJuOyB9IGlmIChpbmZvLmRvbmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0gZWxzZSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7IHN0ZXAoXCJuZXh0XCIsIHZhbHVlKTsgfSwgZnVuY3Rpb24gKGVycikgeyBzdGVwKFwidGhyb3dcIiwgZXJyKTsgfSk7IH0gfSByZXR1cm4gc3RlcChcIm5leHRcIik7IH0pOyB9OyB9XG5cbnZhciBnZXRBcGkgPSBleHBvcnRzLmdldEFwaSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7XG4gICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG4gICAgICB3aGlsZSAoMSkge1xuICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7XG4gICAgICAgICAgICByZXR1cm4gX3ByaXNtaWNKYXZhc2NyaXB0Mi5kZWZhdWx0LmdldEFwaShfcHJpc21pYy5hcGlFbmRwb2ludCk7XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIF9jb250ZXh0LnNlbnQpO1xuXG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCBfY2FsbGVlLCB1bmRlZmluZWQpO1xuICB9KSk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGdldEFwaSgpIHtcbiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xufSgpO1xuXG52YXIgbGlua1Jlc29sdmVyID0gZXhwb3J0cy5saW5rUmVzb2x2ZXIgPSBfcHJpc21pYy5saW5rUmVzb2x2ZXI7XG5cbi8qKiovIH0pLFxuLyogNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG5mdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyB2YXIgZ2VuID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgZnVuY3Rpb24gc3RlcChrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgeyBzdGVwKFwibmV4dFwiLCB2YWx1ZSk7IH0sIGZ1bmN0aW9uIChlcnIpIHsgc3RlcChcInRocm93XCIsIGVycik7IH0pOyB9IH0gcmV0dXJuIHN0ZXAoXCJuZXh0XCIpOyB9KTsgfTsgfVxuXG52YXIgUHJpc21pYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBhcGlFbmRwb2ludCA9IGV4cG9ydHMuYXBpRW5kcG9pbnQgPSBcImh0dHBzOi8vcmFwaGFlbHRtLnByaXNtaWMuaW8vYXBpL3YyXCI7XG5cbnZhciBnZXRBcGkgPSBleHBvcnRzLmdldEFwaSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7XG4gICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG4gICAgICB3aGlsZSAoMSkge1xuICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7XG4gICAgICAgICAgICByZXR1cm4gUHJpc21pYy5nZXRBcGkoYXBpRW5kcG9pbnQpO1xuXG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdChcInJldHVyblwiLCBfY29udGV4dC5zZW50KTtcblxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgX2NhbGxlZSwgdW5kZWZpbmVkKTtcbiAgfSkpO1xuXG4gIHJldHVybiBmdW5jdGlvbiBnZXRBcGkoKSB7XG4gICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn0oKTtcblxudmFyIGxpbmtSZXNvbHZlciA9IGV4cG9ydHMubGlua1Jlc29sdmVyID0gZnVuY3Rpb24gbGlua1Jlc29sdmVyKGRvYykge1xuICBpZiAoZG9jLnR5cGUgPT09IFwiaG9tZXBhZ2VcIikge1xuICAgIHJldHVybiAnLyc7XG4gIH1cbiAgcmV0dXJuIFwiL1wiICsgZG9jLnR5cGUgKyBcIi9cIiArIChkb2MudWlkIHx8ICcnKTtcbn07XG5cbi8qKiovIH0pXG4vKioqKioqLyBdKSkpO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBpbmRleC5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGYwZTQ5OTM0MTE0NDNhZDQ3NDQ2IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicHJpc21pYy1qYXZhc2NyaXB0XCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwicHJpc21pYy1qYXZhc2NyaXB0XCJcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IFwiYmFiZWwtcG9seWZpbGxcIjtcbmltcG9ydCAqIGFzIGZ1bmN0aW9ucyBmcm9tIFwiZmlyZWJhc2UtZnVuY3Rpb25zXCI7XG5pbXBvcnQgKiBhcyBzbSBmcm9tIFwic2l0ZW1hcFwiO1xuaW1wb3J0IHtnZXRBcGksIGxpbmtSZXNvbHZlcn0gZnJvbSBcIi4vcHJpc21pY1wiO1xuXG4vLyAvLyBDcmVhdGUgYW5kIERlcGxveSBZb3VyIEZpcnN0IENsb3VkIEZ1bmN0aW9uc1xuLy8gLy8gaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvZnVuY3Rpb25zL3dyaXRlLWZpcmViYXNlLWZ1bmN0aW9uc1xuLy9cbi8vIGV4cG9ydHMuaGVsbG9Xb3JsZCA9IGZ1bmN0aW9ucy5odHRwcy5vblJlcXVlc3QoKHJlcXVlc3QsIHJlc3BvbnNlKSA9PiB7XG4vLyAgcmVzcG9uc2Uuc2VuZChcIkhlbGxvIGZyb20gRmlyZWJhc2UhXCIpO1xuLy8gfSk7XG5cbmNvbnN0IGZldGNoQWxsUGFnZXMgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IHBhZ2VTaXplID0gNTA7XG4gIGNvbnN0IGFwaSA9IGF3YWl0IGdldEFwaSgpO1xuICBsZXQgYWxsUmVzdWx0cyA9IFtdO1xuICBjb25zdCBpbml0aWFsID0gYXdhaXQgYXBpLnF1ZXJ5KFtdLCB7cGFnZVNpemU6IHBhZ2VTaXplLCBwYWdlOiAxfSk7XG4gIGFsbFJlc3VsdHMgPSBbLi4uYWxsUmVzdWx0cywgLi4uaW5pdGlhbC5yZXN1bHRzXTtcbiAgZm9yIChsZXQgY3VycmVudFBhZ2UgPSAyOyBjdXJyZW50UGFnZSA8PSBpbml0aWFsLnRvdGFsX3BhZ2VzOyBjdXJyZW50UGFnZSsrKSB7XG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgYXBpLnF1ZXJ5KFtdLCB7cGFnZVNpemU6IHBhZ2VTaXplLCBwYWdlOiBjdXJyZW50UGFnZX0pO1xuICAgIGFsbFJlc3VsdHMgPSBbLi4uYWxsUmVzdWx0cywgLi4ucmVzcG9uc2UucmVzdWx0c107XG4gIH1cbiAgcmV0dXJuIGFsbFJlc3VsdHM7XG59O1xuXG5jb25zdCBnZXRVUkxzRnJvbVBhZ2VzID0gKHBhZ2VzKSA9PiB7XG4gIGxldCB1cmxzID0gW107XG4gIHBhZ2VzLm1hcCgoZG9jdW1lbnQpID0+IHtcbiAgICB1cmxzLnB1c2goe1xuICAgICAgdXJsOiBsaW5rUmVzb2x2ZXIoZG9jdW1lbnQpXG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gdXJscztcbn07XG5cbmV4cG9ydHMuc2l0ZU1hcCA9IGZ1bmN0aW9ucy5odHRwcy5vblJlcXVlc3QoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHBhZ2VzID0gYXdhaXQgZmV0Y2hBbGxQYWdlcygpO1xuXG4gIGNvbnN0IHNpdGVtYXAgPSBzbS5jcmVhdGVTaXRlbWFwKHtcbiAgICBob3N0bmFtZTogYCR7cmVxLnByb3RvY29sfTovLyR7cmVxLmhvc3RuYW1lfWAsXG4gICAgY2FjaGVUaW1lOiA2MDAwMDAsXG4gICAgdXJsczogZ2V0VVJMc0Zyb21QYWdlcyhwYWdlcylcbiAgfSk7XG5cbiAgc2l0ZW1hcC50b1hNTChmdW5jdGlvbiAoZXJyLCB4bWwpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmVuZCgpO1xuICAgIH1cbiAgICByZXMuaGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24veG1sJyk7XG4gICAgcmVzLnNlbmQoeG1sKTtcbiAgfSk7XG59KTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaW5kZXguanMiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJiYWJlbC1wb2x5ZmlsbFwiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImJhYmVsLXBvbHlmaWxsXCJcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZmlyZWJhc2UtZnVuY3Rpb25zXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiZmlyZWJhc2UtZnVuY3Rpb25zXCJcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwic2l0ZW1hcFwiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcInNpdGVtYXBcIlxuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgUHJpc21pYyBmcm9tIFwicHJpc21pYy1qYXZhc2NyaXB0XCI7XHJcbmltcG9ydCB7YXBpRW5kcG9pbnQsIGxpbmtSZXNvbHZlciBhcyBscn0gZnJvbSBcIi4uLy4uL3NyYy9wcmlzbWljXCI7XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0QXBpID0gYXN5bmMgKCkgPT4ge1xyXG4gIHJldHVybiBhd2FpdCBQcmlzbWljLmdldEFwaShhcGlFbmRwb2ludCk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgbGlua1Jlc29sdmVyID0gbHI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3ByaXNtaWMuanMiLCJjb25zdCBQcmlzbWljID0gcmVxdWlyZSgncHJpc21pYy1qYXZhc2NyaXB0Jyk7XHJcblxyXG5leHBvcnQgY29uc3QgYXBpRW5kcG9pbnQgPSBcImh0dHBzOi8vcmFwaGFlbHRtLnByaXNtaWMuaW8vYXBpL3YyXCI7XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0QXBpID0gYXN5bmMgKCkgPT4ge1xyXG4gIHJldHVybiBhd2FpdCBQcmlzbWljLmdldEFwaShhcGlFbmRwb2ludCk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgbGlua1Jlc29sdmVyID0gKGRvYykgPT4ge1xyXG4gIGlmKGRvYy50eXBlID09PSBcImhvbWVwYWdlXCIpe1xyXG4gICAgcmV0dXJuICcvJztcclxuICB9XHJcbiAgcmV0dXJuIGAvJHtkb2MudHlwZX0vYCArIChkb2MudWlkIHx8ICcnKTtcclxufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9zcmMvcHJpc21pYy5qcyJdLCJzb3VyY2VSb290IjoiIn0=